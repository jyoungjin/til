## TCP/IP 4계층

---

##### TCP/IP 4계층

1. 개념
   - TCP/IP 4계층은 장치들이 인터넷 상에서 데이터를 주고받을 때 쓰는 독립적인 프로토콜의 집합을 의미합니다.
     TCP/IP는 TCP(Transmission Control Protocol) / IP(Internet Protocol)이라는 의미인데 인터넷을 통해 데이터를 보낼 때 주로 TCP와 IP를 이용해서 보내기 때문에 이런 용어를 가집니다.
   - 계층
     1. Application (응용 계층)
        - HTTP(S), SMTP, SSH, FTP가 대표적이며 웹 서비스, 이메일 등 서비스를 실질적으로 사람들에게 제공하는 층입니다
     2. Transport (전송 계층)
        - UDP, TCP가 대표적이며 애플리케이션 계층에서 받은 메시지를 기반으로 세그먼트 또는 데이터그램으로 데이터를 쪼개고 데이터가 오류없이 순서대로 전달되도록 도움을 주는 계층입니다.
     3. Internet (인터넷 계층)
        - IPv4/IPv6, ICMP, ARP가 대표적이며 한 노드에서 다른 노드로 전송 계층에서 받은 세그먼트 또는 데이터그램을 패킷화 하여 목적지로 전송하는 역할을 담당합니다.
     4. Network Access (링크(=네트워크) 계층)
        - 링크 계층은 전선, 광섬유, 무선 등으로 데이터가 네트워크를 통해 물리적으로 전송되는 방식을 정의합니다.
   - 캡슐화와 비캡슐화
     - 네트워크에서 캡슐화(encapsulation)란 송신자가 수신자에게 데이터를 보낼 때 데이터가 각 계층을 지나며 각 계층의 특징들이 담긴 헤더들이 붙여지는 과정을 의미합니다.
       예를 들어 전송계층은 TCP 헤더, 네트워크 계층은 IP 주소 헤더를 추가하는 것이죠. 비캡슐화(decapsulation)란 이 과정의 역과정입니다. 수신자측에서는 이렇게 캡슐화된 데이터를 역순으로 제거하면서 응용계층까지 도달하는 것을 말합니다.
   - PDU(protocol data unit)
     - TCP/IP 4계층을 기반으로 설명했을 때 각 계층의 데이터 단위를 의미
       - 애플리케이션 계층: 메시지
       - 전송 계층: 세그먼트(TCP), 데이터그램(UDP)
       - 인터넷 계층: 패킷
       - 링크 계층: 프레임(데이터 링크 계층), 비트(물리 계층)
         - **세그먼트** : 적절한 크기로 쪼갠 조각 (세그먼트와 데이터그램의 의미는 같습니다.)
         - **패킷** : 세그먼트에 SP와 DP가 포함된 IP 헤더가 붙은 형태의 조각
           - SP: 송신자의 32비트 IP주소
           - DP: 수신자의 32비트 IP주소
             - IPv4 기준
         - **프레임** : MAC주소 헤더와 CRC/체크섬 트레일러가 붙은 조각
           - CRC/체크섬 트레일러: 데이터의 오류감지를 위한 수학적 함수가 적용된 값. 링크의 오류(과도한 트래픽 등)로 인해 데이터의 손상을 감지하는 역할을 합니다.
             참고로 모든 계층에 전달되는 데이터가 쪼개져서 '패킷'으로 전달된다고도 하는 것도 대강 맞는 말이나 PDU에 따라 부르는게 더 맞는 표현입니다.
   - OSI 7계층
     - TCP / IP 4계층은 OSI 7계층 모델로 설명하기도 합니다.
       TCP/IP 계층과 달리 OSI 계층은 애플리케이션 계층을 세 개로 쪼개고 
       링크 계층을 데이터 링크 계층, 
       물리 계층으로 나눠서 표현하는 것이 다르며 
       인터넷 계층을 네트워크 계층으로 부른다는 점이 다릅니다.

